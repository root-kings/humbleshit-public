(self["webpackChunkhumbleshit_app"]=self["webpackChunkhumbleshit_app"]||[]).push([[653],{7330:(e,a,t)=>{"use strict";t.d(a,{Z:()=>g});t(71);var l=t(3673);function o(e,a,t,o,r,n){const i=(0,l.up)("q-icon"),s=(0,l.up)("q-spinner"),u=(0,l.up)("q-btn"),m=(0,l.up)("q-input");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.Wm)(m,{modelValue:e.filePath,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filePath=a),outlined:"",color:"primary",label:e.label,class:"q-mb-md"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"insert_photo"})])),append:(0,l.w5)((()=>[e.fileProgress?((0,l.wg)(),(0,l.j4)(s,{key:0})):((0,l.wg)(),(0,l.j4)(u,{key:1,round:"",dense:"",color:"primary",icon:"attach_file",onClick:e.triggerFileInput},null,8,["onClick"]))])),_:1},8,["modelValue","label"]),(0,l.Wm)("input",{id:"image-file",class:"hidden",type:"file",onInput:a[2]||(a[2]=(...a)=>e.handleInput&&e.handleInput(...a))},null,32)],64)}t(9544);var r=t(1959),n=t(5474);const i=(0,l.aZ)({name:"RInputFile",props:{label:{type:String,default:"File URL"},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:a}){let t=(0,r.iH)(null),o=(0,r.iH)(""),i=(0,r.iH)(!1);const s=()=>{document.getElementById("image-file").click()};(0,l.bv)((()=>{o.value=e.modelValue}));const u=e=>{i.value=!0;let t=new FormData;t.append("media",e),n.api.post(process.env.API+"/uploads",t,{headers:{"content-type":"multipart/form-data"}}).then((e=>{o.value=e.data[0].path,a("update:modelValue",o)})).catch((e=>console.error(e))).finally((()=>{i.value=!1}))},m=e=>{let a=e.target.files.length?e.target.files[0]:null;console.log(e),a&&u(a)};return{inputFile:t,fileProgress:i,filePath:o,triggerFileInput:s,handleInput:m}}});var s=t(4842),u=t(4554),m=t(6833),d=t(8240),c=t(7518),p=t.n(c);i.render=o;const g=i;p()(i,"components",{QInput:s.Z,QIcon:u.Z,QSpinner:m.Z,QBtn:d.Z})},5653:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>te});var l=t(3673),o=t(2323);function r(e,a,t,r,n,i){const s=(0,l.up)("q-tab"),u=(0,l.up)("q-tabs"),m=(0,l.up)("q-separator"),d=(0,l.up)("q-item-label"),c=(0,l.up)("q-item-section"),p=(0,l.up)("q-img"),g=(0,l.up)("q-avatar"),h=(0,l.up)("q-item"),f=(0,l.up)("q-list"),y=(0,l.up)("q-expansion-item"),w=(0,l.up)("q-btn"),v=(0,l.up)("q-page-sticky"),b=(0,l.up)("q-tab-panel"),P=(0,l.up)("q-tab-panels"),W=(0,l.up)("q-card"),q=(0,l.up)("ParameterCategoryForm"),C=(0,l.up)("q-dialog"),_=(0,l.up)("ParameterForm"),Z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Z,{padding:"",class:"q-mb-xl q-pb-xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{bordered:"",flat:"",class:"rounded-borders"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),"active-color":"primary","narrow-indicator":""},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{name:"parameters",label:"Parameters"}),(0,l.Wm)(s,{name:"categories",label:"Categories"})])),_:1},8,["modelValue"]),(0,l.Wm)(m),(0,l.Wm)(P,{modelValue:e.tab,"onUpdate:modelValue":a[4]||(a[4]=a=>e.tab=a),swipeable:"",animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{name:"parameters",class:"q-pa-none"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.groupedParameters,((a,t)=>((0,l.wg)(),(0,l.j4)(f,{key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{"expand-separator":"",label:a.category},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{separator:"",bordered:"",class:"q-ma-md rounded-borders"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.parameters,(a=>((0,l.wg)(),(0,l.j4)(h,{key:a._id,clickable:"",onClick:t=>e.showParameterDialog(a)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(a.name),1)])),_:2},1024)])),_:2},1024),a.img?((0,l.wg)(),(0,l.j4)(c,{key:0,avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{size:"md",color:"grey-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{src:a.img},null,8,["src"])])),_:2},1024)])),_:2},1024)):(0,l.ry)("",!0)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["label"])])),_:2},1024)))),128)),(0,l.Wm)(v,{position:"bottom-right",offset:[18,18]},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{fab:"",icon:"eva-plus-circle-outline",color:"primary",onClick:a[2]||(a[2]=a=>e.showParameterDialog(null))})])),_:1})])),_:1}),(0,l.Wm)(b,{name:"categories",class:"q-pa-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.categories,(a=>((0,l.wg)(),(0,l.j4)(h,{key:a._id,clickable:"",onClick:t=>e.showCategoryDialog(a)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(a.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,l.Wm)(v,{position:"bottom-right",offset:[18,18]},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{fab:"",icon:"eva-plus-square-outline",color:"secondary",onClick:a[3]||(a[3]=a=>e.showCategoryDialog(null))})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(C,{modelValue:e.categoryDialog,"onUpdate:modelValue":a[5]||(a[5]=a=>e.categoryDialog=a),maximized:"",persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{"is-edit":e.isCategoryEdit,category:e.selectedCategory,onDone:e.categoryDone},null,8,["is-edit","category","onDone"])])),_:1},8,["modelValue"]),(0,l.Wm)(C,{modelValue:e.parameterDialog,"onUpdate:modelValue":a[6]||(a[6]=a=>e.parameterDialog=a),maximized:"",persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"is-edit":e.isParameterEdit,parameter:e.selectedParameter,categories:e.categories,onDone:e.parameterDone},null,8,["is-edit","parameter","categories","onDone"])])),_:1},8,["modelValue"])])),_:1})}var n=t(515),i=t.n(n);const s={class:"text-h6"},u=(0,l.Uk)(" Parameter Category "),m={class:"row q-col-gutter-md items-center"},d={key:0,class:"col-auto"},c={class:"col"};function p(e,a,t,o,r,n){const i=(0,l.up)("q-btn"),p=(0,l.up)("q-card-section"),g=(0,l.up)("q-input"),h=(0,l.up)("q-card"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",s,[u,(0,l.wy)((0,l.Wm)(i,{round:"",flat:"",dense:"",icon:"eva-close-outline",class:"float-right"},null,512),[[f]])])])),_:1}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:o.normalizedCategory.name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.normalizedCategory.name=e),outlined:"",label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"],class:"q-pa-none"},null,8,["modelValue","rules"])])),_:1}),(0,l.Wm)(p,{class:"absolute-bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",m,[t.isEdit?((0,l.wg)(),(0,l.j4)("div",d,[(0,l.Wm)(i,{class:"full-width",round:"",flat:"",icon:"eva-trash-2-outline",type:"submit",color:"negative",onClick:o.deleteCategory},null,8,["onClick"])])):(0,l.ry)("",!0),(0,l.Wm)("div",c,[(0,l.Wm)(i,{class:"full-width",rounded:"",label:"Save",type:"submit",color:"primary",onClick:o.saveCategory},null,8,["onClick"])])])])),_:1})])),_:1})}t(9544);var g=t(5474),h=t(1959),f=t(8825);const y={name:"ParameterCategoryForm",props:{isEdit:{type:Boolean,default:!1},category:{type:Object,default:()=>({name:null})}},emits:["done"],setup(e,{emit:a}){const t=(0,f.Z)();let l=(0,h.iH)({});l.value=i()({},e.category);const o=()=>{e.isEdit?n():r()},r=()=>{t.loading.show(),g.api.post("/parameters/categories",l.value).then((e=>{a("done")})).catch((e=>console.error(e))).finally((()=>{t.loading.hide()}))},n=()=>{t.loading.show(),g.api.put("/parameters/categories/"+l.value._id,l.value).then((e=>{a("done")})).catch((e=>console.error(e))).finally((()=>{t.loading.hide()}))},s=()=>{t.loading.show(),g.api.delete("/parameters/categories/"+l.value._id).then((e=>{a("done")})).catch((e=>console.error(e))).finally((()=>{t.loading.hide()}))};return{normalizedCategory:l,saveCategory:o,deleteCategory:s}}};var w=t(151),v=t(5589),b=t(8240),P=t(4842),W=t(677),q=t(7518),C=t.n(q);y.render=p;const _=y;C()(y,"components",{QCard:w.Z,QCardSection:v.Z,QBtn:b.Z,QInput:P.Z}),C()(y,"directives",{ClosePopup:W.Z});const Z={class:"text-h6"},k=(0,l.Uk)(" Parameter "),Q={class:"row q-col-gutter-md items-center"},V={key:0,class:"col-auto"},z={class:"col"};function D(e,a,t,o,r,n){const i=(0,l.up)("q-btn"),s=(0,l.up)("q-card-section"),u=(0,l.up)("q-input"),m=(0,l.up)("r-input-file"),d=(0,l.up)("q-select"),c=(0,l.up)("q-card"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)("div",Z,[k,(0,l.wy)((0,l.Wm)(i,{round:"",flat:"",dense:"",icon:"eva-close-outline",class:"float-right"},null,512),[[p]])])])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:r.normalizedParameter.name,"onUpdate:modelValue":a[1]||(a[1]=e=>r.normalizedParameter.name=e),outlined:"",label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,l.Wm)(m,{modelValue:r.normalizedParameter.img,"onUpdate:modelValue":a[2]||(a[2]=e=>r.normalizedParameter.img=e),label:"Image"},null,8,["modelValue"]),(0,l.Wm)(d,{modelValue:r.normalizedParameter.category,"onUpdate:modelValue":a[3]||(a[3]=e=>r.normalizedParameter.category=e),outlined:"",options:t.categories,"option-label":"name","option-value":"_id",label:"Category",class:"q-mb-md","emit-value":"","map-options":""},null,8,["modelValue","options"])])),_:1}),(0,l.Wm)(s,{class:"absolute-bottom"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",Q,[t.isEdit?((0,l.wg)(),(0,l.j4)("div",V,[(0,l.Wm)(i,{class:"full-width",round:"",flat:"",icon:"eva-trash-2-outline",type:"submit",color:"negative",onClick:n.deleteParameter},null,8,["onClick"])])):(0,l.ry)("",!0),(0,l.Wm)("div",z,[(0,l.Wm)(i,{class:"full-width",rounded:"",label:"Save",type:"submit",color:"primary",onClick:n.saveParameter},null,8,["onClick"])])])])),_:1})])),_:1})}var I=t(7330);const j={name:"ParameterForm",components:{RInputFile:I.Z},props:{isEdit:{type:Boolean,default:!1},parameter:{type:Object,default:()=>({name:null,category:null})},categories:{type:Array,default:()=>[]}},emits:["done"],data(){return{tempimage:null,normalizedParameter:{name:null,category:null,img:null}}},created(){this.normalizedParameter=i()({},this.parameter)},methods:{saveParameter(){this.isEdit?this.updateParameter():this.createParameter()},createParameter(){this.$q.loading.show(),g.api.post("/parameters",this.normalizedParameter).then((e=>{this.$emit("done")})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))},updateParameter(){this.$q.loading.show(),g.api.put("/parameters/"+this.normalizedParameter._id,this.normalizedParameter).then((e=>{this.$emit("done")})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))},deleteParameter(){this.$q.loading.show(),g.api.delete("/parameters/"+this.normalizedParameter._id).then((e=>{this.$emit("done")})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))}}};var F=t(7727);j.render=D;const H=j;C()(j,"components",{QCard:w.Z,QCardSection:v.Z,QBtn:b.Z,QInput:P.Z,QSelect:F.Z}),C()(j,"directives",{ClosePopup:W.Z});var U=t(5250),E=t(9582);const S={_id:null,name:null},x={_id:null,name:null,category:null},$=(0,l.aZ)({name:"PageParameters",components:{ParameterCategoryForm:_,ParameterForm:H},setup(){const e=(0,U.oR)();(0,E.tv)(),(0,f.Z)();let a=(0,h.iH)("parameters"),t=(0,l.Fl)((()=>e.getters["parameters/categories"])),o=(0,l.Fl)((()=>e.getters["parameters/groupedParameters"])),r=(0,h.iH)(!1),n=(0,h.iH)(!1),s=(0,h.iH)(S),u=(0,h.iH)(!1),m=(0,h.iH)(!1),d=(0,h.iH)(x);const c=()=>{e.dispatch("parameters/fetchCategories")},p=()=>{e.dispatch("parameters/fetchParametersGrouped")};(0,l.bv)((()=>{e.dispatch("general/setTitle","Parameters"),c(),p()}));const g=e=>{e?(m.value=!0,d.value=e):(m.value=!1,d.value=i()({},S)),r.value=!1,u.value=!0},y=()=>{r.value=!1,u.value=!1,p()},w=e=>{e?(n.value=!0,s.value=e):(n.value=!1,s.value=i()({},x)),r.value=!0,u.value=!1},v=()=>{r.value=!1,u.value=!1,c()};return{tab:a,groupedParameters:o,showParameterDialog:g,categories:t,showCategoryDialog:w,categoryDialog:r,isCategoryEdit:n,selectedCategory:s,categoryDone:v,parameterDialog:u,isParameterEdit:m,selectedParameter:d,parameterDone:y}}});var B=t(4379),T=t(7547),R=t(8408),Y=t(5869),A=t(5906),K=t(6602),L=t(7011),N=t(4615),O=t(6332),G=t(2035),J=t(2350),M=t(5096),X=t(4027),ee=t(1007),ae=t(4390);$.render=r;const te=$;C()($,"components",{QPage:B.Z,QCard:w.Z,QTabs:T.Z,QTab:R.Z,QSeparator:Y.Z,QTabPanels:A.Z,QTabPanel:K.Z,QList:L.Z,QExpansionItem:N.Z,QItem:O.Z,QItemSection:G.Z,QItemLabel:J.Z,QAvatar:M.Z,QImg:X.Z,QPageSticky:ee.Z,QBtn:b.Z,QDialog:ae.Z})}}]);