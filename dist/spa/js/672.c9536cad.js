(self["webpackChunkhumbleshit_app"]=self["webpackChunkhumbleshit_app"]||[]).push([[672],{1672:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>$});var a=i(3673),s=i(2323);const n=(0,a.Uk)(" Phone "),o=(0,a.Uk)(" Reporting Manager ");function r(e,t,i,r,l,u){const h=(0,a.up)("q-img"),d=(0,a.up)("q-avatar"),c=(0,a.up)("q-item-section"),p=(0,a.up)("q-item-label"),g=(0,a.up)("q-item"),m=(0,a.up)("q-btn"),f=(0,a.up)("q-list"),w=(0,a.up)("q-card"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{padding:""},{default:(0,a.w5)((()=>[l.userDetails?((0,a.wg)(),(0,a.j4)(w,{key:0,flat:"",bordered:"",class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[l.userDetails.img?((0,a.wg)(),(0,a.j4)(c,{key:0,avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{src:l.userDetails.img,ratio:1},null,8,["src"])])),_:1})])),_:1})):(0,a.ry)("",!0),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"text-h6"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.userDetails.name),1)])),_:1})])),_:1}),(0,a.Wm)(c,{side:""})])),_:1}),l.userDetails.phone?((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{caption:""},{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.userDetails.phone),1)])),_:1})])),_:1}),(0,a.Wm)(c,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{flat:"",color:"primary",round:"",icon:"eva-phone-outline",type:"a",href:`tel:${l.user.phone}`},null,8,["href"])])),_:1})])),_:1})):(0,a.ry)("",!0),l.userDetails.reportsTo?((0,a.wg)(),(0,a.j4)(g,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{caption:""},{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.userDetails.reportsTo.name),1)])),_:1})])),_:1})])),_:1})):(0,a.ry)("",!0)])),_:1})])),_:1})):(0,a.ry)("",!0)])),_:1})}i(9544);var l=i(5474);const u={props:{id:{type:String,default:null}},data(){return{tab:"today",facilities:[],userDetails:null,user:{reportsTo:null,shift:{start:null,end:null},permissions:{}},isuues:[],dialog:!1,activeCleanHoursDay:null,activeCleanHoursWeek:null,activeCleanHoursMonth:null,pendingFacility:null,position:"bottom",name:null,phone:null}},computed:{pendingFacilityDay:function(){return 1*this.pendingFacility},pendingFacilityWeek:function(){return 7*this.pendingFacility},pendingFacilityMonth:function(){return 30*this.pendingFacility}},mounted(){this.$store.dispatch("general/setTitle","Staff Profile"),this.getUser(),this.getUserFacilities(),this.getUserPerformance()},methods:{getUser(){this.$q.loading.show(),l.api.get("/users/details/"+this.id).then((e=>{this.userDetails=e.data,console.log(this.userDetails)})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))},getUserPerformance(){this.$q.loading.show(),l.api.get(process.env.API+"/stats/janitor/day/active-time-total?janitor="+this.id).then((e=>{this.activeCleanHoursDay=e.data.activeTime,console.log(this.activeCleanHoursDay)})).catch((e=>console.error(e))),l.api.get(process.env.API+"/stats/janitor/week/active-time-total?janitor="+this.id).then((e=>{this.activeCleanHoursWeek=e.data.activeTime,console.log(this.activeCleanHoursWeek)})).catch((e=>console.error(e))),l.api.get(process.env.API+"/stats/janitor/month/active-time-total?janitor="+this.id).then((e=>{this.activeCleanHoursMonth=e.data.activeTime,console.log(this.activeCleanHoursMonth)})).catch((e=>console.error(e))),l.api.get(process.env.API+"/stats/janitor/day/pending-facilities?janitor="+this.id).then((e=>{this.pendingFacility=e.data,console.log(this.pendingFacility)})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))},getUserFacilities(){this.$q.loading.show();let e="janitor"===this.user.userType?"/facilities/under-janitor?janitor=":"/facilities/under-supervisor?supervisor=";l.api.get(e+this.id).then((e=>{this.facilities=e.data})).catch((e=>console.error(e))).finally((()=>{this.$q.loading.hide()}))},getdataforedit(e){this.user.name=e.name,this.username=e.username,this.password=e.password,this.phone=e.phone,this.userType="janitor",this.reportsTo=e.reportsTo,this.dialog=!0},onEdit(){this.$q.loading.show();const e={name:this.user.name,username:this.user.username,password:this.user.password,phone:this.user.phone,userType:"janitor",reportsTo:this.user.reportsTo};console.log("LOL:  "+e),l.api.post(`/users/update/${this.id}`,e).then((e=>console.log(e.data))),this.dialog=!1,this.$q.loading.hide()},deleteStaff(){l.api.delete(`/staff/${this.userDetails._id}`).then((e=>e.data)),this.$router.back()}}};var h=i(4379),d=i(151),c=i(7011),p=i(6332),g=i(2035),m=i(5096),f=i(4027),w=i(2350),y=i(8240),v=i(5589),k=i(7547),_=i(8408),W=i(5869),Z=i(5906),j=i(6602),q=i(1007),Q=i(4390),T=i(4842),D=i(6489),b=i(7518),C=i.n(b);u.render=r;const $=u;C()(u,"components",{QPage:h.Z,QCard:d.Z,QList:c.Z,QItem:p.Z,QItemSection:g.Z,QAvatar:m.Z,QImg:f.Z,QItemLabel:w.Z,QBtn:y.Z,QCardSection:v.Z,QTabs:k.Z,QTab:_.Z,QSeparator:W.Z,QTabPanels:Z.Z,QTabPanel:j.Z,QPageSticky:q.Z,QDialog:Q.Z,QInput:T.Z}),C()(u,"directives",{Ripple:D.Z})}}]);