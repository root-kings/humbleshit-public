(self["webpackChunkhumbleshit_app"]=self["webpackChunkhumbleshit_app"]||[]).push([[649],{1649:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>T});var i=t(3673);const l=(0,i.Wm)("span",{class:"q-mx-sm"},"Scan",-1);function n(e,a,t,n,o,s){const c=(0,i.up)("q-tab"),r=(0,i.up)("q-tabs"),u=(0,i.up)("q-separator"),d=(0,i.up)("FacilityList"),m=(0,i.up)("q-tab-panel"),p=(0,i.up)("q-btn"),f=(0,i.up)("q-page-sticky"),v=(0,i.up)("q-tab-panels"),g=(0,i.up)("q-card"),h=(0,i.up)("q-spinner-gears"),w=(0,i.up)("q-inner-loading"),b=(0,i.up)("qrcode-stream"),y=(0,i.up)("q-dialog"),W=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(W,{padding:""},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{bordered:"",flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{modelValue:e.tab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tab=a),"narrow-indicator":"","active-color":"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"active",label:"Active"}),(0,i.Wm)(c,{name:"inactive",label:"Inactive"})])),_:1},8,["modelValue"]),(0,i.Wm)(u),(0,i.Wm)(v,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),animated:"",class:"bg-white text-h5"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"active",class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{facilities:e.activeFacilities},null,8,["facilities"])])),_:1}),(0,i.Wm)(m,{name:"inactive",class:"q-pa-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{facilities:e.inactiveFacilities},null,8,["facilities"]),(0,i.Wm)(f,{position:"bottom-right",offset:[18,18]},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{fab:"",icon:"eva-sun-outline",color:"primary","no-caps":"",onClick:e.startScan},{default:(0,i.w5)((()=>[l])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(y,{modelValue:e.showScanner,"onUpdate:modelValue":a[3]||(a[3]=a=>e.showScanner=a)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{showing:e.loading},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{size:"50px",color:"primary"})])),_:1},8,["showing"]),(0,i.Wm)(b,{onDecode:e.onDecode,onInit:e.onInit},null,8,["onDecode","onInit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var o=t(2323);function s(e,a,t,l,n,s){const c=(0,i.up)("q-icon"),r=(0,i.up)("q-item-section"),u=(0,i.up)("q-item-label"),d=(0,i.up)("q-item"),m=(0,i.up)("q-list"),p=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.j4)(m,{separator:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(t.facilities,(e=>(0,i.wy)(((0,i.wg)(),(0,i.j4)(d,{key:e._id,clickable:"",to:"/facilities/"+e._id},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"brightness_1",color:s.statusColor(e)},null,8,["color"])])),_:2},1024),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"text-body1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[p]]))),128))])),_:1})}const c={props:{facilities:{type:Array,default:()=>[]},issues:{type:Boolean,default:!1}},methods:{statusColor(e){return"done"===e.checkStatus?"positive":"doing"===e.checkStatus?"warning":"negative"}}};var r=t(7011),u=t(6332),d=t(2035),m=t(4554),p=t(2350),f=t(6489),v=t(7518),g=t.n(v);c.render=s;const h=c;g()(c,"components",{QList:r.Z,QItem:u.Z,QItemSection:d.Z,QIcon:m.Z,QItemLabel:p.Z}),g()(c,"directives",{Ripple:f.Z});var w=t(4626),b=t(1959),y=t(5250),W=t(9582),_=t(8825);const q=(0,i.aZ)({components:{FacilityList:h,QrcodeStream:w.QrcodeStream},setup(){let e=(0,b.iH)("active");const a=(0,y.oR)(),t=(0,W.tv)(),l=(0,_.Z)();let n=(0,i.Fl)((()=>a.getters["facilities/facilities"])),o=(0,i.Fl)((()=>n.value.filter((e=>e.active))||[])),s=(0,i.Fl)((()=>n.value.filter((e=>!e.active))||[])),c=(0,i.Fl)((()=>n.value.map((e=>e._id))));(0,i.bv)((()=>{a.dispatch("general/setTitle","Facilities"),a.dispatch("facilities/fetchFacilities")}));let r=(0,b.iH)(!1),u=(0,b.iH)(null),d=(0,b.iH)(!1);const m=()=>{r.value=!0},p=e=>{r.value=!1;let a=e.split("facility=")[1],i=c.value.indexOf(a);-1!=i?t.push("/facilities/"+a+"?edit=true"):l.notify({message:"No such facility.",type:"negative"})},f=e=>{d.value=!0,e.then((()=>{console.log("Successfully initilized! Ready for scanning now!"),d.value=!1})).catch((e=>{"NotAllowedError"===e.name?u.value="Hey! I need access to your camera":"NotFoundError"===e.name?u.value="Do you even have a camera on your device?":"NotSupportedError"===e.name?u.value="Seems like this page is served in non-secure context (HTTPS, localhost or file://)":"NotReadableError"===e.name?u.value="Couldn't access your camera. Is it already in use?":"OverconstrainedError"===e.name?u.value="Constraints don't match any installed camera. Did you asked for the front camera although there is none?":u.value="UNKNOWN ERROR: "+e.message,d.value=!1,l.notify({message:u.value,type:"negative"})}))};return{tab:e,activeFacilities:o,inactiveFacilities:s,startScan:m,showScanner:r,loading:d,onDecode:p,onInit:f}}});var Q=t(4379),Z=t(151),S=t(7547),k=t(8408),F=t(5869),I=t(5906),C=t(6602),V=t(1007),N=t(8240),D=t(4390),H=t(6941),R=t(6394);q.render=n;const T=q;g()(q,"components",{QPage:Q.Z,QCard:Z.Z,QTabs:S.Z,QTab:k.Z,QSeparator:F.Z,QTabPanels:I.Z,QTabPanel:C.Z,QPageSticky:V.Z,QBtn:N.Z,QDialog:D.Z,QInnerLoading:H.Z,QSpinnerGears:R.Z})}}]);