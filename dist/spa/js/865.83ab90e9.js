(self["webpackChunkhumbleshit_app"]=self["webpackChunkhumbleshit_app"]||[]).push([[865],{2310:(e,t,l)=>{"use strict";l.d(t,{Z:()=>W});var a=l(3673),n=l(2323);const o={class:"text-center"},u={class:"text-center"};function c(e,t,l,c,i,r){const d=(0,a.up)("q-icon"),s=(0,a.up)("q-card-section"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-btn"),f=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(f,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Wm)("div",o,[(0,a.Wm)(d,{size:"96px",name:l.icon,color:"grey-4"},null,8,["name"])])])),_:1}),(0,a.Wm)(m,{class:"text-center",header:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(l.label),1)])),_:1}),l.to?((0,a.wg)(),(0,a.j4)(s,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)("div",u,[(0,a.Wm)(p,{"no-caps":"",unelevated:"",rounded:"",label:l.action,to:l.to,color:"primary","text-color":"secondary"},null,8,["label","to"])])])),_:1})):(0,a.ry)("",!0)])),_:1})}const i={props:{icon:{type:String,default:"eva-alert-triangle-outline"},label:{type:String,default:"Sorry! No data found."},to:{type:String,default:null},action:{type:String,default:null}}};var r=l(151),d=l(5589),s=l(4554),m=l(2350),p=l(8240),f=l(7518),g=l.n(f);i.render=c;const W=i;g()(i,"components",{QCard:r.Z,QCardSection:d.Z,QIcon:s.Z,QItemLabel:m.Z,QBtn:p.Z})},1055:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s});var a=l(3673);function n(e,t){const l=(0,a.up)("q-skeleton"),n=(0,a.up)("q-item-section"),o=(0,a.up)("q-item");return(0,a.wg)(),(0,a.j4)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"circle"})])),_:1}),(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"rect"})])),_:1})])),_:1})}var o=l(6332),u=l(2035),c=l(4103),i=l(7518),r=l.n(i);const d={};d.render=n;const s=d;r()(d,"components",{QItem:o.Z,QItemSection:u.Z,QSkeleton:c.ZP})},6865:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>F});var a=l(3673),n=l(2323);const o=(0,a.HX)("data-v-31e85ec3");(0,a.dD)("data-v-31e85ec3");const u={key:0,class:"row q-col-gutter-md"},c={key:1,class:"row q-col-gutter-md"},i={class:"col-12"},r={key:2,class:"row q-col-gutter-md"},d=(0,a.Wm)("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),s=(0,a.Uk)(" Message "),m=(0,a.Uk)(" Edit "),p=(0,a.Uk)(" Delete ");(0,a.Cn)();const f=o(((e,t,l,f,g,W)=>{const v=(0,a.up)("SListItem"),y=(0,a.up)("q-list"),h=(0,a.up)("EmptyTile"),w=(0,a.up)("q-item-label"),_=(0,a.up)("q-avatar"),b=(0,a.up)("q-item-section"),k=(0,a.up)("q-btn"),C=(0,a.up)("q-icon"),Z=(0,a.up)("q-item"),q=(0,a.up)("q-menu"),Q=(0,a.up)("q-page-sticky"),S=(0,a.up)("q-input"),V=(0,a.up)("q-select"),I=(0,a.up)("q-card-section"),j=(0,a.up)("q-card"),U=(0,a.up)("q-dialog"),z=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(z,{padding:""},{default:o((()=>[e.loading?((0,a.wg)(),(0,a.j4)("div",u,[(0,a.Wm)(y,{class:"col-12"},{default:o((()=>[((0,a.wg)(),(0,a.j4)(a.HY,null,(0,a.Ko)(5,(e=>(0,a.Wm)(v,{key:e}))),64))])),_:1})])):e.empty?((0,a.wg)(),(0,a.j4)("div",c,[(0,a.Wm)("div",i,[(0,a.Wm)(h)])])):((0,a.wg)(),(0,a.j4)("div",r,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.contacts,(t=>((0,a.wg)(),(0,a.j4)("div",{key:t.name,class:"col-12"},[(0,a.Wm)(y,{bordered:"",class:"bg-white rounded-borders"},{default:o((()=>[(0,a.Wm)(w,{header:""},{default:o((()=>[(0,a.Uk)((0,n.zw)(t.categoryName),1)])),_:2},1024),((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(t.contacts,(t=>((0,a.wg)(),(0,a.j4)(Z,{key:t._id},{default:o((()=>[(0,a.Wm)(b,{avatar:""},{default:o((()=>[(0,a.Wm)(_,null,{default:o((()=>[d])),_:1})])),_:1}),(0,a.Wm)(b,null,{default:o((()=>[(0,a.Wm)(w,null,{default:o((()=>[(0,a.Uk)((0,n.zw)(t.name),1)])),_:2},1024),(0,a.Wm)(w,{caption:""},{default:o((()=>[(0,a.Uk)((0,n.zw)(t.occupation),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(b,{side:""},{default:o((()=>[(0,a.Wm)(k,{type:"a",href:`tel:${t.phone}`,color:"primary",flat:"",round:"",icon:"eva-phone-outline"},null,8,["href"])])),_:2},1024),(0,a.Wm)(b,{side:""},{default:o((()=>[(0,a.Wm)(k,{round:"",flat:"",icon:"eva-more-vertical-outline"},{default:o((()=>[(0,a.Wm)(q,{"auto-close":""},{default:o((()=>[(0,a.Wm)(y,{style:{"min-width":"100px"}},{default:o((()=>[(0,a.Wm)(Z,{clickable:""},{default:o((()=>[(0,a.Wm)(b,{side:""},{default:o((()=>[(0,a.Wm)(C,{name:"eva-message-circle-outline"})])),_:1}),(0,a.Wm)(b,null,{default:o((()=>[s])),_:1})])),_:1}),(0,a.Wm)(Z,{clickable:"",onClick:l=>e.showEditDialog(t)},{default:o((()=>[(0,a.Wm)(b,{side:""},{default:o((()=>[(0,a.Wm)(C,{name:"eva-edit-outline"})])),_:1}),(0,a.Wm)(b,null,{default:o((()=>[m])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(Z,{clickable:"",onClick:l=>e.deleteContact(t)},{default:o((()=>[(0,a.Wm)(b,{side:""},{default:o((()=>[(0,a.Wm)(C,{name:"eva-trash-2-outline",color:"negative"})])),_:1}),(0,a.Wm)(b,null,{default:o((()=>[p])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])))),128))])),(0,a.Wm)(Q,{position:"bottom-right",offset:[18,18]},{default:o((()=>[(0,a.Wm)(k,{fab:"",round:"",icon:"add",color:"accent",onClick:e.showCreateDialog},null,8,["onClick"])])),_:1}),(0,a.Wm)(U,{modelValue:e.dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.dialog=t),position:"bottom"},{default:o((()=>[(0,a.Wm)(j,{class:"full-width"},{default:o((()=>[(0,a.Wm)(I,{class:""},{default:o((()=>[(0,a.Wm)(S,{modelValue:e.newContact.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.newContact.name=t),outlined:"",dense:"",label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,a.Wm)(S,{modelValue:e.newContact.phone,"onUpdate:modelValue":t[2]||(t[2]=t=>e.newContact.phone=t),outlined:"",dense:"",label:"Phone","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your phone number"],mask:"(###) ### - ####"},null,8,["modelValue","rules"]),(0,a.Wm)(S,{modelValue:e.newContact.occupation,"onUpdate:modelValue":t[3]||(t[3]=t=>e.newContact.occupation=t),outlined:"",dense:"",label:"Occupation","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,a.Wm)(V,{modelValue:e.newContact.category,"onUpdate:modelValue":t[4]||(t[4]=t=>e.newContact.category=t),outlined:"",dense:"",options:e.categories,label:"Department","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please enter the category"]},null,8,["modelValue","options","rules"]),(0,a.Wm)(k,{label:"SAVE",type:"submit",color:"primary",onClick:e.onSubmit},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var g=l(1959),W=l(5474),v=l(8825),y=l(5250),h=l(621),w=l(1055),_=l(2310);const b=(0,a.aZ)({components:{SListItem:w.Z,EmptyTile:_.Z},setup(){(0,a.bv)((()=>{u.dispatch("general/setTitle","Contacts")}));let e=(0,g.qj)({name:null,category:null,_id:null,phone:null,occupation:null}),t=(0,g.iH)(!1);const l=(0,g.iH)(["Water","Inventory","Consumables","Electronics","Electrical","Facilities","Infrastructure"]);let n=(0,g.iH)(!1);const o=(0,v.Z)(),u=(0,y.oR)();let{data:c,error:i,mutate:r}=(0,h.ZP)("/contacts",W.fetcher),d=(0,a.Fl)((()=>!c.value)),s=(0,a.Fl)((()=>!d.value&&!c.value.length)),m=(0,a.Fl)((()=>{if(d.value)return[];{let e=[];return l.value.forEach((t=>{let l=c.value.filter((e=>e.category==t));l.length&&e.push({categoryName:t,contacts:l})})),e}}));function p(){e.value={name:null,category:null,_id:null,phone:null,occupation:null},t.value=!1,n.value=!0}function f(l){e.value=l,n.value=!0,t.value=!0}function w(){t.value?W.api.put("/contacts/"+e.value._id,e).then((e=>{r(),n.value=!1})).catch((e=>{console.error(e)})):W.api.post("/contacts",e).then((e=>{r(),n.value=!1})).catch((e=>{console.error(e)}))}function _(e){o.dialog({title:"Confirm",message:"Do you want to delete the contact?",ok:!0,cancel:!0}).onOk((()=>{W.api.delete(`/contacts/${e._id}`).then((e=>{r()})).catch((e=>{console.error(e)}))}))}return{contacts:m,loading:d,empty:s,newContact:e,categories:l,dialog:n,showCreateDialog:p,showEditDialog:f,onSubmit:w,deleteContact:_}}});var k=l(4379),C=l(7011),Z=l(2350),q=l(6332),Q=l(2035),S=l(5096),V=l(8240),I=l(6335),j=l(4554),U=l(1007),z=l(4390),D=l(151),E=l(5589),P=l(4842),H=l(7727),x=l(7518),L=l.n(x);b.render=f,b.__scopeId="data-v-31e85ec3";const F=b;L()(b,"components",{QPage:k.Z,QList:C.Z,QItemLabel:Z.Z,QItem:q.Z,QItemSection:Q.Z,QAvatar:S.Z,QBtn:V.Z,QMenu:I.Z,QIcon:j.Z,QPageSticky:U.Z,QDialog:z.Z,QCard:D.Z,QCardSection:E.Z,QInput:P.Z,QSelect:H.Z})}}]);